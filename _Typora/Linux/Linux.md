# Linux

## 注意事项

### 注意事项

- Linux **严格区分大小写**
- **所有文件**以文件的形式保存，包括硬件（dev - device设备）
	- 硬盘文件时/dev/sd[a-p]
	- 光盘文件是/dev/sr0等
（在windows中硬件就是硬件，通过设备管理器管理，但是在Linux系统中所有的内容都是通过文件管理，包括硬件，无论是网络设置，ip地址等，否则都是临时生效）
- Linux**不靠扩展名**区分文件类型，靠的是**文件权限**
  - 所有文件都没有后缀名
  - 压缩包：*.gz, *.bz2 等；二进制软件包 *.rpm; 网页文件 *.html, *.php；脚本文件 *.sh；配置文件 *.conf
  - 但是Linux是**不需要**以上的扩展名的，写这些东西只是为了**方便区分文件类型**
  - 大部分配置文件都是以.conf结尾的（有的不是 比如mysql的配置文件）
- Linux所有存储设备都必须**挂载**（把硬件或者设备文件名和连接点连起来的过程，类似于windows中的磁盘分配盘符的过程）之后用户才能使用，包括U盘，硬盘和光盘。

服务器注意事项

- 服务器不允许关机,只能重启。服务器不是你一个人在访问, 如果在大量吞吐数据的时候突然断电,可能会造成数据丢失
- 重启的时候应该关闭服务
- 不要在服务器访问高峰运行高负载命令
	- 比如:全盘杀毒\大数据量的解压缩\大数据量的复制等
- 远程配置防火墙的时候不要把自己踢出服务器
	- 防火墙通过端口号\ip地址\包装数据来判断你是不是能够通过防火墙,并不能完全防范病毒
	- 防火墙不是杀毒软件
- 指定合理的密码规范并且长期更新
- 合理分配权限(权限够用就好, 越小越好, 不用给更多的权限)
- **定期备份重要数据和日志** < 不要把鸡蛋放在同一个篮子里 >

### LInux各目录的作用

- 这些目录的作用是固定的，如果没有特殊情况，都应该遵守这些目录的作用

|目录名|目录作用|
|-------|---------|
|/bin/|存放**系统命令**的目录，普通用户和超级用户都可以执行。不过放在/bin下的命令在单用户模式下也**可以**执行|
|/sbin/|保存和系统环境设置相关的命令，只有超级用户可以使用这些命令进行系统环境设置。但是有些命令可以允许普通用户查看|
|/usr/bin/|存放系统命令的目录，普通用户和超级用户都可以执行。这些命令和系统启动无关，在单用户模式下**不能**执行|
|/usr/sbin/|存放根文件系统不必要的系统管理命令，例如多数服务程序。只有超级用户可以使用。大家其实可以注意到Linux的系统，在所有“sbin”目录中保存的命令只有超级用户可以使用，“bin”目录中保存的命令所有用户都可以使用|
|/boot/|系统启动目录，保存系统启动相关的文件，如内核文件和启动引导程序（gnub）文件等|
|/dev/|设备文件保存位置。我们已经说过Linux中所有内容以文件形式保存，包括硬件。那么这个目录就是用来保存所有硬件设备文件的|
|/etc/|配置文件保存位置。系统内所有采用默认安装方式（rpm安装）的服务的配置文件全部都保存在这个目录当中，如用户账户和密码，服务的启动脚本，常用服务的配置文件等|
|/home/ | 普通用户的家目录。建立每个用户时，每个用户要有一个默认登录位置，这个位置就是这个用户的家目录，所有普通用户的家目录就是在/home下建立一个和用户名相同的目录。如用户user1的家目录就是/home/user|
|/lib/|系统调用的函数库保存位置|
|/lost+found/|当系统意外崩溃或机器意外关机，而产生一些文件碎片放在这里。当系统启动的过程中fsck(File System Check)工具会检查这里，并修复已经损坏的文件系统。这个目录只在**每个分区**中出现，例如lost+found就是根分区的备份恢复目录，/boot/lost+found就是/boot分区的备份恢复目录|
|/media/|挂载目录。系统建议是用来挂载**媒体设备**的，例如*软盘和光盘*|
|/mnt/|挂载目录。早期Linux中只有这一个挂载目录，并没有细分。现在这个目录系统建议挂载**额外设备**，如*U盘，移动硬盘和其他操作系统的分区*|
|/misc/|挂载目录。系统建议用来挂载**NFS服务的共享目录**。**只要是一个已经建立的空目录就可以作为挂载点**。那么系统虽然准备了三个默认挂载目录/media、/mnt、/misc，但是到底在哪个目录中挂载什么设备都可以*由管理员自己决定*。|
|/opt/|第三方安装的软件保存位置。这个目录就是放置和安装其他软件的位置，手工安装的源码包软件都可以安装到这个目录当中。不过**整个行业还是更加习惯把软件放置到*/usr/local/*目录当中**，也就是说/usr/local/目录也可以用来安装软件|
|/proc/|虚拟文件系统，该目录中的数据并不保存到硬盘当中，而是保存到内存当中。主要保存系统的内核，进程，外部设备状态和网络状态灯。如/proc/cpuinfo是保存CPU信息的，/proc/devices是保存设备驱动的列表的，/proc/filesystems是保存文件系统列表的，/proc/net/是保存网络协议信息的|
|/sys/|虚拟文件系统。和proc目录相似，都是保存在内存当中的，主要是保存于内核相关信息的[不要往里面写东西!!!]|
|/root/|超级用户的家目录。普通用户家目录在“/home”下，超级用户家目录直接在“/”下|
|/srv/|服务数据目录。一些系统服务启动之后，可以在这个目录中保存所需要的数据|
|/tmp/|临时目录。系统存放临时文件的目录，该目录下所有用户都可以访问和写入。我们建议此目录中*不能保存重要数据，最好每次开机都把该目录清空*|
|/usr/|系统软件资源目录。注意usr不是user的缩写，而是“*Unix Softwre Resource*”的缩写，所以不是存放用户数据，而是**存放系统软件资源**的目录。系统中安装的软件大多数保存在这里，所以除了/usr/bin/和husr/sbin/这两个目录，我在介绍几个/usr/下的二级目录|
|/var/|动态数据保存位置。主要保存缓存、日志以及软件运行所产生的文件|

## 常用命令

### 文件处理命令

命令格式 : `命令 [-选项][参数]`

例子: `ls -la /etc`

说明:
1. *个别*命令的使用*不遵循*这个格式
2. 当有多个选项的时候, *可以写在一起*,比如 `-l -a` 可以写成 `-la`
3. 简化选项与完整选项 `-a` 等于 `-all`



**目录处理命令 ls**

英文原意 : list

所在路径 :  /bin/ls

权限 : 所有用户

功能 : 显示目录文件

语法 : 
- `ls -a` 查看所有(all)文件，包括隐藏文件【隐藏文件的作用：眼不见为净】
- `ls 目录` 查看指定目录的文件
- `ls -l` 长格式(long)显示，就是详细信息显示
  - 【文件类型 引用计数（硬链接）用户所属组 文件大小 最后修改时间（Linux没有文件的创建时间这个概念） 文件名】
  - 第一个选项：-rw-r--r-- { 第一个字母 ：文件类型 `-二进制目录` `d目录` `l软连接文件` } {后 3*3个字母 rw- r-- r-- 表示所有者u，所属组g，其他人o 的权限：r 读 ；w 写；x 执行(excute) }
  - 问题：为什么作为这个文件的所有者，也没有这个文件的x权限呢？
      - 对文件来讲，x是它的最高权限，只要权限够使用就没有必要给更多的权限，对于普通的文件，没有必要给更高的权限，只有当这个文件是个可以执行的程序（比如脚本）的时候，我们才可以给他 x 权限。
  - 默认情况下，谁创建了这个文件，谁就是这个文件的所有者。文件的默认所属组是这个用户所属的组
- `ls -h` 人性化显示，将文件大小以合适的单位显示（不止ls这个命令，还有好多其他的命令也支持这个-h选项，如文件大小，分区大小）
- `ls -d` 查看当前文件本身的目录信息
- `ls -i` 显示每一个文件的唯一标志（i 节点号）
    - 一个文件一定对应一个i节点，一个i节点不一定只对应一个文件




**目录处理命令 mkdir**

英文原意 : make directories

所在路径 :  /bin/mkdir

权限 : 所有用户

功能 : 创建新目录， -p递归创建

语法：`mkdir -p [目录名]`



**目录处理命令 cd**

英文原意 : change directory

所在路径 :  shell 内置命令

权限 : 所有用户

功能 : 切换目录

语法：`cd [目录]`切换到指定目录，`cd ..`切换到上一级目录（中间有空格）



**目录处理命令 pwd**

英文原意 : print working directory

所在路径 :  /bin/pwd

权限 : 所有用户

功能 : 显示当前目录

语法：直接输入 `pwd`



**文件处理命令 rmdir**

英文原意 : remove empty directories

所在路径 :  /bin/rmdir

权限 : 所有用户

功能 : 删除空目录

语法：`rmdir 目录名`



**目录处理命令 cp**

英文原意 : copy

所在路径 :  /bin/cp

权限 : 所有用户

功能 : 复制文件或者目录

语法：

- `cp -rp [原文件目录][目标目录]`
- `cp -rp [原文件目录1] [原文件目录2] .. [原文件目录n] [目标目录]`
- `-r` 复制目录
- `-p` 保留文件属性(时间等属性)

注意：复制的时候可以改成另一个名字



**目录处理命令 mv**

英文原意 : move 

所在路径 :  /bin/mv

权限 : 所有用户

功能 : 剪切文件 改名

语法：`mv [原文件目录] [目标目录]`



**目录处理命令 rm**

英文原意 : remove

所在路径 :  /bin/rm

权限 : 所有用户

功能 : 删除文件

语法：`rm -rf [文件或目录]`

- `-r` 删除目录 
- `-f` 强制执行
- `rm -rf *` 删除当前目录下的所有文件

注意：

- Linux中没有回收站的概念
- CTRL C 终止正在执行的命令



**文件处理命令 touch**

英文原意 : touch

所在路径 :  /bin/touch

权限 : 所有用户

功能 : 创建空文件

语法：`touch [文件名]`

注意：

- 不建议创建带有空格的文件名
- 如果真的要用有空格的文件名，要用双引号括起来
- 缺省创建的文件不具有可执行权限



**文件处理命令 cat**

所在路径 :  /bin/cat

权限 : 所有用户

功能 : 显示文件内容

语法：`cat [文件名]` 

- `-n` 显示行号



**文件处理命令 tac**

所在路径 :  /bin/

权限 : 所有用户

功能 : 倒着显示文件内容

语法：`cat [文件名]` 

- `-n` 显示行号




**文件处理命令 more**

所在路径 :  /bin/more

权限 : 所有用户

功能描述 : 分页显示文件内容

语法：`more [文件名]`
- `f 或者 空格 ` 翻页
- `(Enter)` 换行
- `q/Q` 退出



**文件处理命令 less**

同more的功能一样

不同点：

- `Page Up` 向上翻页
- 输入 `/关键词` 进行关键词查找，按`n`跳转到下一个关键词所在的地方



**文件处理命令head 或者 tail** 

所在路径 :  /bin/head

权限 : 所有用户

功能 : 显示文件的前面（后面）几行

语法：`head [文件名]`

- head 特有 `-n [行数]` 指定行数，默认显示前（后）10行
- tail 特有 `-f` 动态显示文件末尾几行的内容



**链接命令 ln**

英文原意 : link

所在路径 :  /bin/ln

权限 : 所有用户

功能 : 生成链接文件

语法：`ln -s [原文件][目标文件]`

- `-s` 生成软链接
- 不加 -s 就是硬链接

软链接文件的特点：

- 所有的软链接文件的权限都是 lrwxrwxrwx
- 文件的大小很小，只是一个符号链接
- 箭头指向对应的原文件
- 原文件和链接文件的i节点不同

硬链接文件的特点：

- 类似于拷贝cp -p  + **同步更新**
- 通过 i 节点识别
- 不能跨分区
- 不能针对目录使用
- 源文件丢失，硬链接文件依然可以访问

如何判断这个文件是个硬链接文件？

- 两个硬链接共享一个i节点

### 权限管理命令

**权限管理命令 chmod**

英文原意 : change the permissions mode of a file

所在路径 :  /bin/chmod

权限 : 所有用户

功能 : 改变文件或目录权限

语法：

- `chmod [{ u g o a} { + - = } {r w x} ] [文件或者目录]`

- 或者 ` chmod [mode=421] [文件或目录] `

- `-R` 递归修改

一个文件的权限只有这个文件的**所有者**和**root**可以更改

权限的数字表示 r ---- 4 ; w ---- 2; x ---- 1; 权限为这些数字相加。比如 rwxr--rw-表示为 746

对 rwx 的理解

| 代表字符 | 权限 | 对文件的含义       | 对目录的含义         |
| -------- | ---- | ------------------ | -------------------- |
| r        | 读   | 可以查看文件的内容 | 可以列出目录中的内容 |
| w    | 写   | 可以修改文件内容 | 可以**在目录中**创建、删除文件 |
| x | 执行|可以执行文件|可以进入目录|



**权限管理命令 chown**

英文原意：change file ownership

命令所在路径：/bin/chown

执行权限：所有用户

功能：改变文件或者目录的所有者

语法：`chown [用户] [文件或目录]`



**权限管理命令 chgrp**

英文原意：change file group ownership

命令所在路径：/bin/chgrp

执行权限：所有用户

功能：改变文件或者目录的所属组

语法：`chown [用户组] [文件或目录]`



**权限管理命令 umask**

英文原意：the user file-creation mask

命令所在路径：shell 内置命令

执行权限：所有用户

功能：显示、设置文件的缺省权限

语法：`umask [-S]`

- -S 以 rwx 的形式**显示**新建文件缺省权限

如果我们在命令行中直接输入umask，那么会输出0022，什么意思？第一个0：特殊权限； 022 ：三种用户的分类的权限 ----w--w-，但是实际上是个逻辑与的关系：实际的权限是755【指目录】。



【这里没大听懂】

### 文件搜索命令



**文件搜索命令 find**

命令所在路径：/bin/find

执行权限：所有用户

语法：`find [搜索范围] [匹配条件]`

- `-iname`  表示不分大小写的匹配
- `-size` 表示按照大小进行查找 `+n` 大于  `-n` 小于  `n` 等于（大小的单位是数据块，一个数据块是0.5K）
    - `find / -size +204800` 在根目录下查找大于100M的文件
- `-user` 根据所有者进行查找
- `-group` 根据所属组进行查找

功能描述：文件搜索

匹配条件中可以有正则表达式

- ‘\*’ 可以匹配所有字符（不限长度） `find /etc -name init*` 表示匹配在etc中所有以init开头的文件
- ‘？’可以匹配任意**单个**字符 `find /etc -name init???` 表示在etc中匹配以init开头并且结尾有3个字符的文件

高级查找：

- `-amin` 访问时间 access ; `-cmin` 文件属性 change ; `-mmin` 文件内容 modify ;
    -  在etc目录下查找5分钟内被修改过属性的文件和目录：`find /etc -cmin -5`

- `-a` 两个条件同时满足；`-o` 两个条件满足一个即可； 
    - 在 /etc下查找大于80M且小于100M的文件 `find /etc -size +163840 -a -size -204800`
- `-type` 根据文件类型进行查找 f文件；d目录；l软链接文件
- `-inum` 根据 i 节点进行查找
- `-exec/-ok 命令 {}\;` 对搜索结果执行操作 ; 在/etc下查找inittab文件并显示其详细信息`find /etc -name inittab -exec ls -l{}\;` 记住格式就行。（可以用这个查找一个文件有没有硬链接）



**文件搜索命令 locate**

命令所在路径：/usr/bin/locate

执行权限：所有用户

功能：在文件资料库中查找文件（不是直接在硬盘上查找，而是对系统中的所有文件建立了一个资料库，在资料库中查找文件。类似于everything.exe）

语法：`locate [文件名]`


### 帮助命令





### 用户管理命令





### 压缩解压命令

- 绝大多数病毒都很难感染压缩文件
- Linux 中的压缩包文件，Windows都支持，但是windows中的压缩包文件，Linux中不一定支持，比如 .rar


**压缩命令 gzip**

英文原意：GNU zip

所在路径：/bin/gzip

执行权限：所有用户

功能：压缩文件

语法：`gzip [文件]`

压缩后文件格式：.gz

注意：

- gzip 只能压缩文件，不能压缩目录
- 压缩之后不保留原文件



**解压命令 gunzip**

英文原意：GNU unzip

所在路径：/bin/gunzip

执行权限：所有用户

功能：解压 .gz 文件

语法：`gunzip [文件]`


**【最常用】打包命令 tar**

命令所在路径：/bin/tar

执行权限：所有用户

功能描述：打包目录

语法：`tar -选项[zcf] [压缩后文件名] [目录]`

- `-c` 打包
- `-v` 显示详细信息
- `-f` 指定文件名
- `-z` **打包同时压缩**

打包后文件格式：**`.tar.gz`**


**解压命令 tar**

语法：`tar -选项[xzvf] [目录]`

- `-x` 解包
- `-v` 显示详细信息
- `-f` 指定解压文件
- `-z` 解压缩


**压缩解压命令 zip**

命令所在目录：/usr/bin/zip

执行权限：所有用户

语法：`zip [选项] [压缩后文件名] [文件或目录]`
- `-r` 压缩目录

压缩后文件格式：`.zip`

- 可以保留源文件

**解压缩命令 unzip**

命令所在目录：/usr/bin/zip

执行权限：所有用户

语法：`unzip [压缩文件]`

功能描述：解压.zip的压缩文件

**压缩解压命令 bzip2**

命令名称：bzip2

命令所在路径：/usr/bin/bzip2

执行权限：所有用户

语法：`bzip2 [选项][文件]`

- `-k` 产生压缩文件之后保留原文件

压缩效率非常惊人，压缩量非常大，经常用于大型文件的压缩

**压缩解压命令**

bunzip2 使用方法同上。

- `-k`解压之后保留压缩包


### 网络命令




### 关机重启命令




### 文本编辑器vim

<img src="D:\GITHUB\MyNotes\_Typora\Linux\Linux.assets\image-20201003085550162.png" alt="image-20201003085550162" style="zoom:80%;" />

- **先按esc进入命令模式**


| 插入命令 | 作用 |
| ---- | ---- |
|   a   |   在光标所在字符后插入   |
| i |在光标所在字符前插入|
|A | 在光标所在行尾插入|
|I | 在光标所在行首插入|
|o | 在光标下插入新行|
| O | 在光标上插入新行|


| 定位命令 | 作用 |
| -------- | ---- |
|  :set nu  | 设置行号  |
| :set nonu | 取消行号|
| gg |到第一行|
| G | 到最后一行|
| nG | 到第n行|
| :n | 到第n行|
| $ | 跳转至行尾|
| 0 | 跳转至行首|

| 删除命令 | 作用 |
| -------- | ---- |
|      x    |  删除光标所在处字符  |
| nx | 删除光标所在处后n个字符|
| dd |删除光标所在行 ndd 删除n行|
| dG | 删除光标所在行到文件末尾的内容|
|D | 删除光标所在处到行尾的内容|
| : n1, n2d| 删除指定范围内的行|


| 复制剪切命令| 作用|
|---|---|
|yy | 复制当前行|
|nyy | 复制当前行以下n行|
|dd|剪切当前行|
|ndd|剪切当前行以下n行|
|p \ P | 粘贴在当前光标所在行下或行上|

|插入和取消命令|作用|
|----|-----|
|r | 取代光标所在处的字符|
| R | 从光标所在处开始替换字符,按Esc结束|
|u|取消上一步操作|

|查找和替换命令|作用|
|---|----|
| /string | 搜索指定字符串,搜索时忽略大小写:set ic|
| n | 搜索指定字符串的下一个出现位置|
| :%s/old/new/g |全文替换自定字符串|
| :n1,n2s/old/new/g|在一定范围内替换指定字符串|

|保存及退出命令|作用|
|------|--|
|:w| 保存修改|
| :w new_filename | 另存为指定文件|
| :wq | 保存并退出|
| ZZ | 保存并退出|
|:q! | 不保存退出|
| :wq! | 保存修改并退出(文件所有者及root可以使用)|






## 软件包管理



## 用户和用户组管理



## 权限管理



## 文件系统管理



## Shell基础



## Linux系统管理


## 日志和启动管理