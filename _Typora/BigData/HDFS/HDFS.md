## 简介

目前采用的计算机集群都是**由普通硬件构成**的，降低了硬件上的开销

<img src=".\Untitled.imgs\image-20210415195805656.png" alt="image-20210415195805656" style="zoom:67%;" />

windows和linux把磁盘化为512字节一组，是文件系统读写操作的最小单位，block是磁盘块的整数倍。

HDFS块默认位64MB，如果小于这个大小，只占用实际大小的空间。

<img src=".\Untitled.imgs\image-20210415200000117.png" alt="image-20210415200000117" style="zoom:50%;" />

优点：

- 兼容、链家的硬件设备
- 流数据的读写
- 大数据集
- 简单的文件模型
- 强大的跨平台兼容性

缺点

- 不适合低延迟数据访问
- 无法高效存储大量小文件
- 不支持多用户写入和任意修改文件

## 相关概念

### 块

默认64MB，远大于普通文件系统 -> 最小化寻址开销

块的好处：

- 支持大规模文件存储：文件以块为单位进行存储，一个大规模文件可以被分拆成若干个文件块，不同的文件块可以被分发到不同的节点上，因此，一个文件的大小不会受到单个节点的存储容量的限制，可以远远大于网络中任意节点的存储容量
- 简化系统设计：首先，简化了存储管理，因为文件块大小是固定的，这样就可以很容易计算出一个节点可以存储多少文件块；其次，方便了元数据的管理，元数据不需要和文件块一起存储，可以由其他系统负责管理元数据
- 适合数据备份：每个文件块都可以冗余存储到多个节点上，大大提高了系统的容错性和可用性。

### 名称节点和数据节点

<img src=".\Untitled.imgs\image-20210415200602061.png" alt="image-20210415200602061" style="zoom:50%;" />

<img src=".\Untitled.imgs\image-20210415201318689.png" alt="image-20210415201318689" style="zoom: 67%;" />



![image-20210415202713354](.\Untitled.imgs\image-20210415202713354.png)

解决名称节点运行期间EditLog不断变大的问题：

使用SecondaryNameNode第二名称节点（：用来保存名称节点中对HDFS元数据信息的备份，并减少名称节点重启的时间，一般单独运行在一台机器上）

<img src=".\Untitled.imgs\image-20210415203036333.png" alt="image-20210415203036333" style="zoom:67%;" />

<img src=".\Untitled.imgs\image-20210415204558162.png" alt="image-20210415204558162" style="zoom:67%;" />



## HDFS体系结构

### 体系结构概述



### 命名空间管理



### 通信协议



### 客户端



### 局限性





## 存储原理

### 冗余数据保存



### 数据存取策略



### 数据错误与恢复





## 数据读写过程