
> 缓冲的定义，为什么引入？

缓冲（Buffer）是计算机系统中的一种临时数据存储区域，用于临时存放数据，以平衡数据的生产者和消费者之间的速度差异。引入缓冲的主要目的是优化数据传输和处理效率，减少由于数据传输速度不匹配而导致的性能瓶颈。

缓冲的主要特点包括：

1. **临时存储**：缓冲区是一种临时存储区域，用于暂时存放数据，以便在数据生产者和消费者之间进行数据交换和传输。
2. **解耦**：缓冲区能够解耦数据的生产者和消费者，使它们能够独立运行并不受对方速度的限制。生产者可以按照自己的速度生成数据，并将数据写入缓冲区，而消费者则可以按照自己的速度从缓冲区读取数据进行处理。
3. **平滑数据流**：通过缓冲区，可以平滑数据流，避免数据传输和处理的不连续性，从而提高系统的整体性能和效率。
4. **提高效率**：缓冲区能够优化数据传输和处理效率，尤其是在数据生产者和消费者速度不匹配或者数据交换频繁的情况下，能够减少由于数据传输速度不匹配而导致的性能瓶颈。

> 简要谈谈高速缓存cache的原理？

**局部性原理**：首先cache是基于程序局部性原理的。程序访问的局部性原理包括时间局部性和空间局部性。时间局部性是指在最近的未来要用到的信息，很可能是现在正在使用的信息，因为程序中存在循环。空间局部性是指在最近的未来要用到的信息，很可能与现在正在使用的信息在存储空间上是邻近的，因为指令通常是顺序存放、顺序执行的，数据一般也是以向量、数组等形式簇聚地存储在一起的。

高速缓冲技术就是利用局部性原理，把程序中正在使用的部分数据存放在一个高速的、容量较小的Cache中，使CPU的访存操作大多数针对Cache进行，从而提高程序的执行速度。

**缓存层次结构**：高速缓存通常采用多层次的结构，包括 L1 Cache、L2 Cache 等多级缓存。L1 Cache 位于 CPU 内部，速度最快但容量较小；L2 Cache 位于 CPU 外部，速度次于 L1 Cache 但容量较大。通过多级缓存的结构，可以更好地利用空间局部性和时间局部性，提高缓存命中率。

> IO 接口是什么？

IO接口（设备控制器）位于CPU与设备之间，它既要与CPU通信，又要与设备通信，还要具有按CPU发来的命令去控制设备工作的功能，主要由三部分组成：

1. **设备控制器与CPU的接口**。该接口有三类信号线：数据线、地址线和控制线。数据线通常与两类寄存器相连：数据寄存器（存放从设备送来的输入数据或从CPU送来的输出数据）和控制/状态寄存器（存放从CPU送来的控制信息或设备的状态信息）。
2. **设备控制器与设备的接口**。一个设备控制器可以连接一个或多个设备，因此控制器中有一个或多个设备接口。每个接口中都存在数据、控制和状态三种类型的信号。
3. **IO逻辑**。用于实现对设备的控制。它通过一组控制线与CPU交互，对从CPU收到的I/O命令进行译码。CPU启动设备时，将启动命令发送给控制器，同时通过地址线把地址发送给控制器，由控制器的I/O逻辑对地址进行译码，并相应地对所选设备进行控制。

> 中断产生的原因？

断是计算机系统中一种重要的事件处理机制，它可以打断 CPU 正在执行的程序，转而执行与中断相关的处理程序。中断产生的原因可以分为以下几种情况：

1. **外部设备请求**：外部设备（如键盘、鼠标、硬盘、网卡等）需要 CPU 的处理或者与 CPU 进行数据交换时，会向 CPU 发送中断请求，称为外部中断。例如，键盘输入字符时，键盘控制器会发送中断请求，通知 CPU 有新的数据到达。
2. **软件中断**：有时程序运行时需要执行一些特殊的操作，例如请求系统服务、处理异常情况等，这种情况下程序会通过软件中断指令（如 INT 指令）向 CPU 发出中断请求。
3. **异常和错误**：在程序执行过程中，可能会发生一些异常或错误情况，如除零错误、内存访问越界、非法指令等，这些情况会触发异常中断，通常由操作系统或者硬件进行处理。
4. **内部硬件故障**：在计算机系统中，可能会出现硬件故障，例如内存错误、总线错误等，这些硬件故障会触发硬件中断，通常由硬件系统进行处理。

> Cache 的映像方式？

1. **直接映射**：主存中的每一块只能装入Cache中的唯一位置。若这个位置已有内容，则产生块冲突，原来的块将无条件地被替换出去（无须使用替换算法）。直接映射实现简单，但不够灵活，即使Cache的其他许多地址空着也不能占用，这使得直接映射的块冲突概率最高，空间利用率最低。
2. **全相联映射**：主存中的每一块可以装入Cache中的任何位置，每行的标记用于指出该行取自主存的哪一块，所以CPU访存时需要与所有Cache行的标记进行比较。全相联映射方式的优点是比较灵活，Cache块的冲突概率低，空间利用率高，命中率也高；缺点是标记的比较速度较慢，实现成本较高，通常需采用昂贵的按内容寻址的相联存储器进行地址映射。
3. **组相联映射**：将Cache分成Q个大小相等的组，每个主存块可以装入固定组中的任意一行，即组间采用直接映射、而组内采用全相联映射的方式，如图3.20所示。它是对直接映射和全相联映射的一种折中，当Q=1时变为全相联映射，当Q=Cache行数时变为直接映射。假设每组有r个Cache行，则称之为r路组相联。

> 如何理解存储器的地址线和数据线？

1. **地址线**：地址线用于指示内存中的特定位置。每个存储单元都有一个唯一的地址，通过地址线的不同组合，可以访问到内存中的不同位置。地址线的数量决定了内存的寻址范围，例如，如果有 n 条地址线，那么可以寻址 $2^{2n}$ 个存储单元。在读写数据时，CPU通过地址线向内存发送地址信息，以指示所需数据的存储位置。
2. **数据线**：数据线用于传输实际的数据。CPU通过数据线与内存进行数据的读写操作。数据线的宽度决定了每次数据传输的位数，也就是一次可以传输的数据量。例如，一个 8 位的数据线可以一次传输 8 位（1 字节）的数据，而一个 32 位的数据线可以一次传输 32 位（4 字节）的数据。

> 冯·诺依曼计算机的特点是什么？

1. 冯·诺依曼计算机主要由**五个部件**组成，分别是：运算器、控制器、存储器、输入设备和输出设备；
2. 冯诺依曼体系结构的指令和数据均采用**二进制**码表示，以同等地位存放于存储器中，均可按地址寻访；
3. 指令由**操作码和地址**码组成，操作码用来表示操作的性质，地址码用来表示操作数所在存储器中的位置；
4. 指令在存储器中按**顺序存放**，通常指令是按顺序执行的，特定条件下，可以根据运算结果或者设定的条件改变执行顺序；
5. 机器以**运算器**为中心，输入输出设备和存储器的数据传送通过运算器完成。

> CPU 组成部分及其功能？

1. **控制单元（Control Unit，CU）**：
    - 控制单元负责从内存中读取解释并执行指令序列，指导数据在各个部件之间的传输和处理。
2. **算术逻辑单元（Arithmetic Logic Unit，ALU）**：
    - 算术逻辑单元是CPU的核心部件，根据控制单元发出的指令对数据进行处理，负责执行算术运算（如加法、减法、乘法、除法）和逻辑运算（如与、或、非、异或）并生成运算结果。
3. **寄存器（Registers）**：
    - 寄存器是CPU内部的高速存储器件，用于临时存储指令、数据和中间结果。
    - CPU中包括多种寄存器，如程序计数器（PC）、指令寄存器（IR）、累加器（Accumulator）、数据寄存器等。
4. **时钟（Clock）**：
    - 时钟是CPU的一个重要组成部分，用于同步各个部件的工作。
    - 时钟发出的脉冲信号控制CPU内部各个部件的操作，确保它们按照统一的时间间隔进行工作。
5. **数据总线和地址总线**：
    - 数据总线用于在CPU和其他设备之间传输数据。
    - 地址总线用于指示内存中的地址，从而读取或写入数据。
6. **缓存（Cache）**：
    - 缓存是CPU内部的一种高速存储器，用于暂时存储频繁访问的数据和指令，以提高数据访问速度。
    - 缓存分为指令缓存（Instruction Cache）和数据缓存（Data Cache），分别用于存储指令和数据。

> 怎样用最有效率的方法计算 2 乘以 8？

计算 2 乘 8 最有效的方法是利用二进制位移运算。在二进制中，将一个数左移一位相当于乘以 2，因此将 2 左移 3 位相当于 2 乘以 8。

2 的二进制表示为 10，将其左移 3 位，得到的结果为 10000（二进制）。将二进制数转换为十进制，即可得到最终的结果。

> CPU 有哪些寄存器？

在CPU中至少要有六类寄存器：指令寄存器（IR）、程序计数器（PC）、存储器地址寄存器（MAR）、存储器数据寄存器（MDR）、累加寄存器（AC）、程序状态字寄存器（PSW）。

**存储器数据寄存器**：用来作为从主存读入或者向主存写入的指令或者数据，弥补了CPU和主存以及外围设备速度上的差异。
**存储器地址寄存器**：用来保存CPU当前所访问的主存单元的地址。
**指令寄存器**：用来保存当前正在执行的一条指令。
**程序计数器**：用来指出下一条指令在主存储器中的地址。
**累加寄存器**：是一个通用寄存器。为ALU暂时保存一个操作数或运算结果。
**程序状态字寄存器（标志寄存器）**：存储着执行指令后的状态标志，用于控制程序的流程和执行条件判断。

> 存储器的带宽？

**是什么**：存储器的带宽指的是在单位时间内从存储器读取或写入数据的速率。

**影响因素**：
1. **存储器类型：** 不同类型的存储器（例如DDR4/5 RAM、SSD等）具有不同的带宽。    
2. **总线宽度：** 存储器的总线宽度决定了每个时钟周期内可以传输的数据位数。
3. **时钟速率：** 存储器的时钟速率表示每秒钟的时钟周期数，它直接影响存储器每秒钟可以执行的操作次数。
4. **通道数量：** 一些存储器具有多个通道，允许同时进行多个数据传输操作，从而提高了带宽。
5. **数据传输协议：** 存储器使用的数据传输协议（例如DDR、PCIe）也会影响其带宽。一些新的数据传输协议具有更高的带宽。

> 计算机组成原理的 DRAM 为什么刷新？

DRAM内部的存储单元是由电容器构成的，电容器可以存储电荷来表示数据的1或0。然而，由于电容器本身会逐渐失去电荷，这意味着存储的数据会逐渐消失。这种现象被称为电容器的漏电现象。

为了保持数据的稳定性，防止数据丢失，DRAM需要定期进行刷新操作。

> 说出几种你了解的存储器和特点？

首先按照存储方式可以分为内存和外存，内存的类型有RAM，ROM等类型，外存有SSD，HDD，光盘等存储器。然后我会介绍以上几种存储器的特点。

1. **RAM**。随机存储器的任何一个存储单元都可以随机存取，而且存取时间与存储单元的物理位置无关。其优点是读写方便、使用灵活，主要用作主存或cache。RAM又分为静态RAM和动态RAM。
2. **ROM**。只读存储器的内容只能随机读出而不能写入。信息旦写入存储器就固定不变，即使断电，内容也不会丢失。因此，通常用它存放固定不变的程序比如BIOS和固件等。写入速度比读出速度慢很多。
3. **HDD**。机械硬盘，使用旋转的磁盘（盘片）和移动的磁头来读取和写入数据。数据存储在盘片的表面上。
4. **SSD**。固态硬盘，基于闪存技术，通常比机械硬盘读写速度快。

> CPU 响应中断的条件是什么？

应中断的条件通常包括以下几点：

1. **中断信号到达**：中断信号由外部设备发送给CPU，表示需要CPU进行某种处理。这个信号可以是硬件中断（例如I/O设备完成数据传输、定时器计时结束等）或软件中断（例如系统调用、异常等）。
2. **中断使能**：CPU出于开中断状态。
3. **中断优先级**：如果多个中断同时发生，CPU会根据中断的优先级来确定响应的顺序。通常，具有更高优先级的中断会被优先处理。
4. **当前指令执行完成**：如果CPU正在执行指令，需要等待当前指令执行完成后才能响应中断。

> **CPU 与外设交换信息的方式（3种方式）？**

1. **程序查询方式**

原理：信息交换的控制完全由CPU执行程序实现，程序查询方式接口中设置一个数据端口和一个状态端口。主机进行IO操作时，先发出询问信号，读取设备的状态并根据设备状态决定下一步操作究竞是进行数据传送还是等待。

在这种控制方式下，CPU一旦启动IO，就必须停止现行程序的运行，并在现行程序中插入一段程序。程序查询方式的主要特点是CPU有“踏步”等待现象，CPU与I/O串行工作，在一段时间内只能和一台外设交换信息，效率大大降低。

2. **程序中断方式**

原理：CPU在程序中安排好在某个时机启动某台外设，然后CPU继续执行当前的程序，不需要像查询方式那样一直等待外设准备就绪。一旦外设完成数据传送的准备工作，就主动向CPU发出中断请求，请求CPU为自已服务。在可以响应中断的条件下，CPU暂时中止正在执行的程序，转去执行中断服务程序为外设服务，在中断服务程序中完成一次主机与外设之间的数据传送，传送完成后，CPU返回原来的程序。

3. **DMA方式**

直接存储器存取方式

DMA方式是一种完全由硬件进行成组信息传送的控制方式，它具有程序中断方式的优点，即在数据准备阶段，CPU与外设并行工作。DMA方式在外设与内存之间开辟一条“直接数据通道”，信息传送不再经过CPU，降低了CPU在传送数据时的开销。由于数据传送不经过CPU，也就不需要保护、恢复CPU现场等烦琐操作。

> DMA 接口的组成部分？

- **主存地址计数器**：存放要交换数据的主存地址。
- **传送长度计数器**：记录传送数据的长度，计数溢出时，数据即传送完毕，自动发中断请求信号。
- **数据缓冲寄存器**：暂存每次传送的数据。DMA请求触发器：每当VO设备准备好数据后，给出一个控制信号，使DMA请求触发器置位。
- **“控制/状态”逻辑**：由控制和时序电路及状态标志组成，用于指定传送方向，修改传送参数，并对DMA请求信号、CPU响应信号进行协调和同步。
- **中断机构**：当一个数据块传送完毕后触发中断机构，向CPU提出中断请求。

> 操作数流系统的三种基本状态？

1. **就绪状态（Ready）**： 在就绪状态下，操作数流系统中的操作或任务已准备好执行，但由于某些条件尚未满足，暂时无法执行。这些条件可能包括等待输入数据就绪、等待其他任务完成或等待系统资源可用等。一旦条件满足，任务将转换到活动状态。   
2. **活动状态（Active）**： 在活动状态下，操作数流系统中的操作或任务正在执行。这意味着任务正在消耗资源并进行计算。在活动状态下，任务会处理输入数据，并根据其规则或逻辑执行相应的操作。
3. **完成状态（Completed）**： 在完成状态下，操作数流系统中的操作或任务已经完成其执行。这意味着任务已经成功完成了其计算或处理，并且输出结果已经可用。完成状态通常标志着任务的生命周期结束，可以释放相关资源并进行下一步操作。

> 比较 RISC 和 CISC？

1. CISC指令集的**指令系统**复杂庞大，指令数目一般为200条以上；RISC指令集指令系统比较精简，一般不到100条。
2. CISC指令集的**指令的长度**不固定，指令格式多，寻址方式多。RISC指令集长度固定，格式少，寻址方式少。
3. CISC指令集可以**访存**的指令不受限制。RISC指令集只有load\store指令能够访存，其他指令都在寄存器中间进行
4. CISC指令集各种指令**使用频度**相差很大，各种指令执行时间相差很大，大多数指令需多个时钟周期才能完成。RISC指令集执行时间相差不大，大多在一个时钟周期内完成，采用流水线技术。
5. CISC指令集**控制器**大多数采用微程序控制。RISC指令集以硬布线为主，少用微程序控制。
6. CISC指令集难以用优化编译生成高效的目标代码程序。RISC指令集特别重视编译优化工作。

> 指令执行阶段？任务？

1. **取指（Fetch）**：根据PC的内容从存储器（通常是主存）中获取要执行的指令，存放在IR中。
2. **译码（Decode）**：解释指令的含义，并确定执行指令所需的操作。
3. **执行（Execute）**：执行指令所指定的操作，这可能包括算术运算、逻辑操作、存取存储器等。
4. **访存（Memory Access）**：如果指令需要读取或写入内存中的数据，则执行该操作。
5. **写回（Write Back）**：将执行结果写回到适当的目标位置，例如寄存器或内存。

> 解释下存取时间和存储周期的区别？

**存储周期包含存取时间和恢复时间**。指两次独立访问存储器操作之间的最小间隔。

**存取时间**指从启动一次存储器操作到完成该操作所经历的时间。

**恢复时间**指读写操作之后，用来恢复内部状态的时间。

> 微命令，微指令，微操作，微程序什么的比较？

- 微程序是由微指令组成的，用于描述机器指令。微程序实际上是机器指令的实时解释器，是由计算机设计者事先编制好并存放在控制存储器中的，一般不提供给用户。
- 一个微操作对应一条微指令，一条微指令可能有多个微命令。
- 微操作是动作，微指令是个编码。
- 微操作是微命令作用在硬件上的一个动作。

> 计算机组成原理的微命令是什么？

在计算机组成原理中，微命令是指微程序控制器执行的最小的控制单元。用于控制计算机中的微操作。

微命令通常包括一系列的微操作，这些微操作用于控制计算机的各种功能和部件，例如寄存器的读写、ALU 的操作、数据传输、地址计算等。微指令序列是由微程序控制器根据当前指令的操作码等输入信息生成的，它们被组织成微程序存储器中的微指令序列，以实现特定指令的功能。
