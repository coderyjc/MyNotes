

## 数据库设计概述

新奥尔良方法：

![[assets/Pasted image 20240310204148.png]]

过程迭代和逐步求精。

基本步骤：

1. 需求分析（任务、调查重点是数据和处理）
2. 结构设计（概念、逻辑和物理结构设计）
3. 行为设计（功能、事务和程序设计）
4. 数据库实施（加载数据、调试运行等）
5. 数据库运行和维护

![[assets/Pasted image 20240310204335.png]]


## 数据库需求分析

调查处理对象，了解原系统，明确新系统的功能，考虑以后可能的扩充和改变。

## 数据库结构设计

1. 概念结构设计：形成DB概念模式，用语义层模型描述，如E-R图
2. 逻辑结构设计：形成DB逻辑模式与外模式用结构层模型描述，例如基本表、视图等。
3. 物理结构设计：形成DB内模式，用文件级术语描述。例DB文件或目录、索引。

### 概念结构设计

自底向上：先定义局部应用的概念结构，然后按一定的规则把它们集成起来，从而得到全局概念模型。
自顶向下：先定义全局概念模型，然后再逐步细化。
由里向外：先定义最重要的核心结构，然后再逐步向外扩展
混合策略：将自顶向下和自底向上结合起来使用。

![[assets/Pasted image 20240311190423.png]]

1. 设计局部E-R模型：E-R模型的设计内容包括确定局部E-R模型的范围、定义实体、联系以及它们的属性。
2. 设计全局E-R模型将所有局部E-R图集成为一个全局E-R图即全局E-R模型
3. 优化全局E-R模型

**设计局部E-R模型**

概念结构是对现实世界的一种抽象。所谓抽象是对实际的人、物、事和概念进行人为处理，抽取所关心的共同特性，忽略非本质细节，并把这些特性用各种概念准确的加以描述。一般有三种抽象方法：分类、概括、聚集

分类：在相似的个体之间提取共性，建立 “ 类 ” 的概念（集合）
- 个体与个体之间 ：具有相似的状态与行为，有相同的描述结构，相互用主码值区分。
- 个体与类之间 ：个体 Is a member of 类

两条准则：
1. 属性不能再具有需要描述的性质。即属性必须是不可分的数据项，不能再由另一些属性组成
2.   属性不能与其他实体具有联系 ，联系只发生在实体之间。

**设计全局E-R模型**

将局部E-R图集成为全局E-R图，需消除各分E-R图合并时产生的冲突。解决冲突是合并E-R图的主要工作和关键所在。

冲突主要有三类：
1. 属性冲突：属性域冲突、属性取值单位冲突
2. 命名冲突：同名异义和异名同义
3. 结构冲突：同一对象在不同应用中具有不同的抽象、同一实体在不同的局部E-R图中所包含的属性个数和属性的排列次序不完全相同。

**优化全局E-R模型**

实体个数尽可能少，实体所包含的属性尽可能少，实体间联系无冗余。

### 逻辑结构设计

逻辑结构设计的步骤：E-R图转化为关系模型，对数据模型进行优化，外模式的设计。

将实体型和实体间的联系转换为关系模式，并确定这些关系模式的属性和码

实体的转换原则：一个实体转换为一个关系模式。实体的属性就是关系的属性，实体的标识符就是关系的码。一个实体转换为一个关系模式、实体的名称对应关系模式的名称、实体的属性对应关系模式的属性、实体的候选码对应关系模式的候选码。

**联系的转换原则**：

对于实体间的联系有以下不同的情况：
- 一个1：1联系可以转换为一个独立的关系模式，也可以与任意一端所对应的关系模式合并。
- 一个1：n联系可以转换为一个独立的关系模式，也可以与n端所对应的关系模式合并。
- 一个m：n联系转换为一个关系模式。
- 三个或三个以上实体间的一个多元联系可以转换为一个关系模式。具有相同码的关系模式可以合并。

从理论上讲，1：1联系可以与任意一端对应的关系模式合并

但在一些情况下，与不同的关系模式合并效率会大不一样。因此究竟应该与哪端的关系模式合并需要依应用的具体情况而定。

由于连接操作是最费时的操作，所以一般应以尽量减少连接操作为目标。例如，如果经常要查询某个班级的班主任姓名，则将管理联系与教师关系合并更好些。

**数据模型优化**

1. 确定数据依赖，包括关系模式内部各属性之间的数据依赖不同关系模式属性之间数据依赖
2. 消除冗余的联系
3. 确定所属范式
4. 按照数据处理的要求，确定是否合并或分解。

注意：并不是规范化程度越高的关系就越优，一般说来，第三范式就足够了

常用分解优化方法：水平分解和垂直分解。

<u>水平分解</u>

以时间、空间、类型等范畴属性取值为条件，满足相同条件的数据行为一个子表。分解的依据一般以范畴属性取值范围划分数据行。这样在操作同表数据时，时空范围相对集中，便于管理。

![[assets/Pasted image 20240311194310.png]]

<u>垂直分解</u>

以非主属性所描述的应用对象生命历程的先后为条件，对应相同历程的属性为一个子表。分解的依据是将非主属性按其数据生成的时间段划分，描述相同时间段的属性划分在一个组中。使操作同表数据时时空范围相对集中，但便于管理。

![[assets/Pasted image 20240311194354.png]]

### 物理结构设计

物理结构设计的步骤：确定数据库的物理结构，对物理结构进行时间和空间效率的评价。

为关系模式选择 存取方法（建立存取路径）设计关系、索引等数据库文件的物理存储结构。

**建立索引**

 一般用户可以通过建立索引的方法来加快数据的查询效率。建立索引的一般原则为：在经常作为查询条件、连接条件、分组条件，连接操作的属性上建立索引。

注意：一个表可以建立多个索引，但只能建立一个聚簇索引。

**确定存储结构**

一般的存储方式有：顺序存储、散列存储、聚簇存储

一般情况下系统都会为数据选择一种最合适的存储方式。

