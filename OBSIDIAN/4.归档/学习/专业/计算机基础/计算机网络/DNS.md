### DNS

**定义**：域名系统（Domain Name System，DNS）是一种命名系统，用来把具有特定含义的主机名转换为便于机器处理的IP地址。DNS系统采用客户/服务器模型，其协议运行在UDP之上。

我将从3个方面聊一下DNS：层次域名空间、域名服务器和域名解析。

**层次域名空间**：DNS使用域名层次结构来组织和管理域名。域名由多个部分组成，每个部分之间用点号（.）分隔，例如www.example.com。域名层次结构从右向左逐级划分为顶级域（TLD）、二级域、三级域，以此类推，形成一个树状结构。

**域名服务器**：DNS服务器根据功能和位置的不同，可以分为多个类型，包括根DNS服务器、顶级域DNS服务器、权威DNS服务器和递归DNS服务器等。它们各自承担着不同的责任和角色，共同构建了完整的DNS系统。

**域名解析**：DNS的主要功能是将域名解析为相应的IP地址。当用户在浏览器中输入一个域名时，操作系统会向本地DNS服务器发送查询请求，以获取该域名对应的IP地址。

域名解析有两种方法：递归查询和递归与迭代相结合的查询。

1. <u>递归查询</u>：一般不使用。对根域名服务器造成负载过大。本机 - 本地域名服务器 - 根域名服务器 - 顶级域名服务器 - 权限域名服务器。
2. <u>递归和迭代相结合的查询</u>：
	1. 客户机向其本地域名服务器发出DNS请求报文（递归查询）。
	2. 本地域名服务器收到请求后，查询本地缓存，若没有该记录，则以DNS客户的身份向根域名服务器发出解析请求报文（迭代查询）。
	3. 根域名服务器收到请求后，判断该域名属于.com域，将对应的顶级域名服务器dns.com的IP地址返回给本地域名服务器。
	4. 本地域名服务器向顶级域名服务器dns.com发出解析请求报文（选代查询）。
	5. 顶级域名服务器dns.com收到请求后，判断该域名属于abc.com域，因此将对应的授权域名服务器dns.abc.com的IP地址返回给本地域名服务器。
	6. 本地域名服务器向授权域名服务器dns.abc.com发起解析请求报文（选代查询）。
	7. 授权域名服务器dns.abc.com收到请求后，将查询结果返回给本地域名服务器。
	8. 本地域名服务器将查询结果保存到本地缓存，同时返回给客户机。