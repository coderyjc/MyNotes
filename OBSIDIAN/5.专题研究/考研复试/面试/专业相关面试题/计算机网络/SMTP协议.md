### SMTP协议

**是什么**：SMTP（Simple Mail Transfer Protocol）是一种用于电子邮件传输的协议。它是互联网上常用的电子邮件标准之一。是基于TCP协议的。

**作用**：用户代理向邮件服务器发送邮件或在邮件服务器之间发送邮件。用的是“推”（Push）的通信方式，即用户代理向邮件服务器发送邮件及在邮件服务器之间发送邮件时，SMTP客户将邮件“推”送到SMTP服务器。

*扩展：POP3协议*：邮件读取协议用于用户代理从邮件服务器读取邮件，如POP3。POP3用的是“拉”（PulI）的通信方式，即用户读取邮件时，用户代理向邮件服务器发出请求，“拉”取用户邮箱中的邮件。

*扩展：邮件收发流程*：

1. 发信人调用用户代理来撰写和编辑要发送的邮件。
2. 用户代理用SMTP把邮件传送给发送端邮件服务器。
3. 发送端邮件服务器将邮件放入邮件缓存队列中，等待发送。
4. 运行在发送端邮件服务器的SMTP客户进程，发现邮件缓存中有待发送的邮件，就向运行在接收端邮件服务器的SMTP服务器进程发起建立TCP连接。
5. TCP连接建立后，SMTP客户进程开始向远程SMTP服务器进程发送邮件。当所有待发送邮件发完后，SMTP就关闭所建立的TCP连接
6. 运行在接收端邮件服务器中的SMTP服务器进程收到邮件后，将邮件放入收信人的用户邮箱，等待收信人在方便时进行读取。
7. 收信人打算收信时，调用用户代理，使用POP3（或IMAP）协议将自己的邮件从接收端邮件服务器的用户邮箱中取回（如果邮箱中有来信的话）。