## 【35】计算机网络

谈谈对网络延时的理解，为什么会出现网络延时？
与 TP 协议配套的其他协议？
TCP/IP 网络协议的核心是什么，如何引出“over everything”和“everything over？”
**TCP、UDP 协议？他们的区别？**


> 计算机网络体系结构？

七层结构（OSI体系结构）、四层结构（TCP/IP体系结构）、五层结构（学习版本，简单易懂）

![[assets/Pasted image 20240316211128.png]]

OSI是一个理论上的网络通信模型，而TCP/IP则是实际运行的网络协议。

五层结构：

1. **应用层**：应用层是网络协议的最高层，主要任务通过进程间的交互完成特定网络应用。应用层协议定义的是<u>应用程序（进程）间</u>通信和交互的规则。
	1. 对于不同的网络应用需要有不同的应用层协议，在互联网中的应用层协议很多，如域名系统DNS，支持万维网应用的HTTP协议，支持电子邮件的SMTP协议，等等。应用层交互的数据单元称为`报文`。
2. **运输层**：有时也译为传输层，它负责为两台主机中的<u>进程</u>提供通信服务。该层主要有以下两种协议：
	1. 传输控制协议 (Transmission Control Protocol，TCP)：提供面向连接的、可靠的数据传输服务，数据传输的基本单位是`报文段`（segment）；
	2. 用户数据报协议 (User Datagram Protocol，UDP)：提供无连接的、尽最大努力的数据传输服务，但不保证数据传输的可靠性，数据传输的基本单位是`用户数据报`。
3. **网络层**：网络层负责为分组网络中的<u>不同主机</u>提供通信服务，并通过选择合适的路由将数据传递到目标主机。在发送数据时，网络层把运输层产生的报文段或用户数据封装成`分组`或包进行传送。
	1. 在TCP/IP体系中，由于网络层使用IP协议，因此分组也叫`IP数据报`。
4. **数据链路层**：数据链路层通常简称为链路层。数据链路层在两个相邻节点传输数据时，将网络层交下来的IP数据报组装成`帧`，在两个相邻节点之间的链路上传送帧。
5. **物理层**：确保数据可以在各种物理媒介上进行传输，为数据的传输提供可靠的环境。

> 网络按地域范围分类？

1. 广域网（WAN)。广域网的任务是提供长距离通信，直径为几十千米到几千千米的区域。广域网是因特网的核心部分。连接广域网的各结点交换机的链路一般都是高速链路，具有较大的通信容量。
2. 城域网（MAN)。城域网的覆盖范围可以跨越几个街区甚至整个城市，覆盖区域的直径范围是5～50km。城域网大多采用以太网技术，因此有时也常并入局域网的范围讨论。
3. 局域网（LAN)。覆盖范围较小，通常是直径为几十米到几千米的区域。局域网在设备配置的数量上没有太多的限制，少的可以只有两台，多的可达几百台，设备可以是计算机，服务器等设备。传统上，<u>局域网使用广播技术，而广域网使用交换技术。</u>
4. 个人区域网（PAN)。个人区域网是指在个人工作的地方将电子设备（如平板电脑、智能手机等）用无线技术连接起来的网络，比如说蓝牙耳机，键盘，鼠标等。

> 什么是局域网？

**是什么**：局域网（Local Area Network，LAN）是指在有限的地理范围内建立的、由一组相互连接的计算机和网络设备组成的计算机网络。

特点：

1. **有限的范围**：局域网的范围通常在几十米到几公里之间，这样的范围足以覆盖一个建筑物、校园或者办公区域。
2. **高速连接**：局域网通常采用高速的数据传输技术，如以太网、无线局域网（Wi-Fi）以确保在本地网络中的设备之间能够快速地进行数据通信。
3. **低成本**：通常由个人、公司或组织自行建设和管理。
4. **高可靠性**：局域网内的设备通常由同一组织或个人管理，因此可以采取相应的措施来确保网络的稳定性和可靠性。
5. **共享资源**：局域网内的设备可以共享资源，如打印机、文件服务器、网络存储等，使得用户可以方便地访问和共享信息。
6. **局限性**：与广域网相比，局域网的覆盖范围更小，因此在与外部网络进行通信时通常需要通过路由器或网关等设备进行连接。


> 网络协议的三个核心要素，及概念，各起什么作用？

网络协议的三个核心要素是：语法、语义和时序。它们分别描述了网络通信中消息的结构、含义和顺序，是网络通信的基础。

1. **语法（Syntax）**：
    - **概念**：语法定义了消息的组织方式和编码规则。它规定了消息的各个部分如何排列和组合，以及如何进行编码和解码。
    - **作用**：语法确保了通信双方能够理解和解释发送和接收的消息，使得数据在网络中能够正确地传输和解析。
2. **语义（Semantics）**：
    - **概念**：语义描述了数据的含义和意义，即消息中各个部分的作用和信息含义。它规定了消息所传递的数据的解释方式和含义，以及对数据的操作和处理规则。
    - **作用**：语义确保了通信双方能够理解和解释消息的含义和目的，使得数据在网络中能够正确地被理解和处理。它定义了消息的含义和操作规则，保证了通信双方之间的正确理解和协调。
3. **时序（Timing）**：
    - **概念**：时序规定了数据的传输顺序和时间序列，即消息的发送和接收时机以及顺序。它规定了消息的发送和接收顺序，以及数据在网络中的传输速度和延迟。
    - **作用**：时序确保了通信双方能够在适当的时间内发送和接收消息，保证了消息的及时性和顺序性。它定义了消息的传输顺序和时间序列，保证了通信的有序性。


> 网络按使用者分类？

1. **公用网**（Public Network）。指电信公司出资建造的大型网络。“公用”的意思是指所有愿意按电信公司的规定交纳费用的人都可以使用这种网络，因此也称公众网。
2. **专用网**（Private Network）。指某个部门为满足本单位特殊业务的需要而建造的网络。这种网络不向本单位以外的人提供服务。例如铁路、电力、军队等部门的专用网。

> 网络的拓扑结构主要有？

1. **总线形网络**。用单根传输线把计算机连接起来。总线形网络的优点是建网容易、增/减结点方便、节省线路。缺点是重负载时通信效率不高、总线任意一处对故障敏感。
2. **星形网络**。每个终端或计算机都以单独的线路与中央设备相连。中央设备早期是计算机，现在一般是交换机或路由器。星形网络便于集中控制和管理，因为端用户之间的通信必须经过中央设备。缺点是成本高、中央设备对故障敏感。
3. **环形网络**。所有计算机接口设备连接成一个环。环形网络最典型的例子是令牌环局域网。环可以是单环，也可以是双环，环中信号是单向传输的。
4. **网状网络**。一般情况下，每个结点至少有两条路径与其他结点相连，多用在广域网中。其有规则型和非规则型两种。其优点是可靠性高，缺点是控制复杂、线路成本高。


> 【to be continue】什么是码元？什么是码元长度？

码元是在数字信号中代表一种离散状态或符号的基本单位，是数字通信中数字信号的计量单位，这个时长内的信号称为k进制码元，而该时长称为码元宽度。通常来说，1码元可以携带若干比特的信息量。

**举例**：例如，在使用二进制编码时，只有两种不同的码元：一种代表0状态，另一种代表1状态。

> 网桥的作用？

连接两个或者多个以太网，分隔开每个以太网的冲突域成为一个个网段。隔离冲突域。网桥还有路径选择功能，接收到帧之后要决定正确的路径从而把帧送到相应的节点。

但是因为功能有局限，因此目前已经很少使用了。

*扩展：为什么很少使用，现在用什么取代了网桥？* ：交换机。

交换机具有自学习功能，可以动态更新MAC地址表，转发数据包更加灵活。并且具有更多的端口，并且可以通过堆叠或连接多个交换机来扩展网络规模。 此外，还具有更多的功能，比如VLAN支持、QoS（服务质量）管理、链路聚合等。

> 交换机的作用与工作原理？

**作用**：局域网交换机，又称以太网交换机，实质上就是一个多端口的网桥，工作在数据链路层。以太网交换机的每个端口都直接与单台主机或另一个交换机相连。交换机能将网络分成小的冲突域，为每个工作站提供更高的带宽。利用以太网交换机还可以方便地实现虚拟局域网VLAN，VLAN不仅可以隔离冲突域，而且可以隔离广播域。

**原理**：它检测从以太端口来的数据帧的源和目的地的MAC地址，然后与系统内部的动态查找表进行比较，若数据源的源MAC地址不在查找表中，则将该地址加入查找表，并将数据帧发送给相应的目的端口。

*扩展：自学习功能*

> IP 与物理地址分别作用在那一层？

IP地址（Internet Protocol Address）在网络协议栈中位于网络层（第三层）。网络层负责在网络中的不同节点之间提供数据传输服务，并提供了诸如IP地址分配、路由选择等功能。

物理地址，也称为 MAC 地址（Media Access Control Address），位于数据链路层（第二层）。数据链路层是 OSI 模型中的第二层，负责在物理网络媒介上传输数据帧，并提供了对底层物理介质的访问和控制。

> 以太局域网第二层可靠吗？

以太网采用CSMA/CD协议，接受方不向发送方进行确认，差错帧直接丢弃，差错纠正由高层负责。

> 路由器的功能和原理？

**功能**：连接不同的网络进行分组转发，路由计算。前者处理通过路由器的数据流，关键操作是转发表查询、转发及相关的队列管理和任务调度等：后者通过和其他路由器进行基于路由协议的交互，完成路由表的计算。

原理：

1. **路由选择**部分也称控制部分，其核心构件是路由选择处理机。路由选择处理机的任务是根据所选定的路由选择协议**构造出路由表**，同时经常或定期地和相邻路由器交换路由信息而不断更新和维护路由表。

2. **分组转发**部分由三部分组成：交换结构、一组输入端口和一组输出端口。输入端口在从物理层接收到的比特流中提取出数据链路层顿，进而从顿中提取出网络层数据报，输出端口则执行恰好相反的操作。交换结构是路由器的关键部件，它根据转发表对分组进行处理，将某个输入端口进入的分组从一个合适的输出端口转发出去。

> 路由器工作在网络分层中的哪个层次？

路由器通常工作在OSI模型的第三层，即网络层。在TCP/IP模型中，网络层对应于Internet协议（IP）层。

路由器的主要功能是根据目标IP地址转发数据包，使其能够在不同的网络之间进行通信。它通过查找路由表来确定数据包应该被发送到哪个接口以及下一跳的路由器，从而实现网络间的数据转发。

> 子网掩码的作用？

子网掩码（Subnet Mask）是一种用于确定 IP 地址的网络部分和主机部分的分界线的技术。它通常与 IP 地址一起使用，用于将一个 IP 地址分成网络地址和主机地址两部分，以便在网络中进行路由和通信。

子网掩码的作用包括以下几个方面：

1. **确定网络地址和主机地址**：子网掩码指定了 IP 地址中网络部分和主机部分的分隔位置。通过与 IP 地址进行逻辑与操作，可以将 IP 地址分割成网络地址和主机地址两部分，以便在网络中进行路由和通信。
2. **实现子网划分**：子网掩码允许网络管理员将一个大的 IP 地址空间划分成多个子网，每个子网可以独立管理和运行，提高了网络的灵活性和可管理性。

> IP 组播有哪些好处？

1. **节省带宽：** IP组播允许源向多个目的地发送相同的数据，而无需为每个目的地单独发送数据包。这可以大大减少网络流量和带宽的使用，特别是在广播相同数据给大量接收者时效果显著。
2. **减少网络负载：** 由于数据只需在网络中传输一次，而不是针对每个接收者单独传输，因此可以减少网络负载和拥塞。
3. **实时传输：** IP组播可以用于实时多媒体传输，如音频和视频流。通过将数据同时传输给多个接收者，可以实现更高效的实时传输，降低延迟和丢包率。

> 什么是三次握手协议？

TCP协议。

**第一步**：客户机的TCP首先向服务器发送连接请求报文段。这个特殊报文段的首部中的同步位SYN置1，同时选择一个初始序号seq=x。

**第二步**：服务器的TCP收到连接请求报文段后，如同意建立连接，则向客户机发回确认，并为该TCP连接分配缓存和变量。在确认报文段中，把SYN位和ACK位都置1，确认号是ack=x+1，同时也为自已选择一个初始序号seq=y。

**第三步**：当客户机收到确认报文段后，还要向服务器给出确认，并为该TCP连接分配缓存和变量。确认报文段的ACK位置1，确认号ack=y+1，序号seq=x+1。

> 距离说明什么情况适合使用 tcp 协议和 udp 协议？

1. **TCP**：
    - **特点：** 可靠的、面向连接的数据传输，确保数据的可靠性和顺序性。并且具有重传机制，保证数据的完整性。
    - **适用场景：** 适用于需要可靠传输和顺序交付的应用，如网页浏览、电子邮件传输、文件传输等。
2. **UDP**：
    - **特点**：UDP 是无连接的、不可靠的数据传输协议。支持广播和多播，能够将数据一次性发送给多个接收方。
    - **适用场景**：适用于对实时性要求较高、对数据可靠性和顺序性要求较低的应用，如实时语音通话、视频直播等。

> IP 编址有那几种方式？

三个阶段：分类的IP地址、划分子网、构成超网，前两阶段是分类的，第三阶段是无分类。

1. 分类的IP地址(最基本的编址方法)：将IP地址划分为若干个固定类（如A类、B类、C类、D类等），每一类地址由网络号（net-id）和主机号（host-id）构成，记为：

$$IP地址 ::= {<网络号>，<主机号>}，$$

IP地址不仅指明了一台主机，还指明了主机所连接到的网络。

2. 划分子网：（由两级IP地址到三级IP地址）

子网掩码出现。从主机号借用若干位作为子网号，记为： 

$$IP地址 ::= {<网络号>,<子网号>,<主机号>}$$

3. CIDR（Classless Inter-Domain Routing）构成超网

$$IP 地址 ::= {< 网络前缀号 >, < 主机号 >}$$

CIDR虽然没有明确地划分子网，但分配到一个CIDR地址块的单位可借用主机位，使网络前缀变长，达到划分子网的效果。


> ARP 协议？

**是什么**：地址解析协议（Address Resolution Protocol）。每台主机都设有一个ARP高速缓存，用来存放本局域网上各主机和路由器的IP地址到MAC地址的映射表，称ARP表。使用ARP来动态维护此ARP表。

**工作原理**：*【本局域网】* 主机A欲向本局域网上的某台主机B发送IP数据报时，先在其ARP高速缓存中查看有无主机B的IP地址。如果有，就可查出其对应的硬件地址，再将此硬件地址写入MAC帧，然后通过局域网将该MAC帧发往此硬件地址。如果没有，那么就通过使用目的MAC地址为FFFF-FF-FF-FF-FF的帧来封装并广播ARP请求分组（广播发送），使同一个局域网里的所有主机都收到此ARP请求。主机B收到该ARP请求后，向主机A发出ARP响应分组（单播发送），分组中包含主机B的IP与MAC地址的映射关系，主机A收到ARP响应分组后就将此映射写入ARP缓存，然后按查询到的硬件地址发送MAC帧。*【不同局域网】* 就要通过ARP找到一个位于本局域网上的某个路由器的硬件地址，然后把**分组**发送给这个路由器，让这个路由器把**分组**转发给下一个网络。剩下的工作就由下一个网络来做。

*扩展：为什么工作在网络层？* ARP由于“看到了”IP地址，所以它工作在网络层，而NAT路由器由于“看到了”端口，所以它工作在传输层。对于某个协议工作在哪个层次，读者应该能通过协议的工作原理进行猜测。

> 介绍一下 DHCP 协议

**是什么**：动态主机配置协议（Dynamic Host Configuration Protocol）常用于给主机动态地分配IP地址，这种机制允许一台计算机加入新的网络和获取IP地址而不用手工参与。DHCP是==基于UDP的应用层协议==。

**工作原理**：基于客户/服务器模式。需要IP地址的主机在启动时就向DHCP服务器广播发送发现报文，这时该主机就成为DHCP客户。本地网络上所有主机都能收到此广播报文，但只有DHCP服务器才回答此广播报文。DHCP服务器先在其数据库中查找该计算机的配置信息。若找到，则返回找到的信息。若找不到，则从服务器的IP地址池中取一个地址分配给该计算机。

**工作过程**：
1. DHCP客户机广播“**DHCP发现**”消息，试图找到网络中的DHCP服务器，以便从DHCP服务器获得一个IP地址。源地址为0.0.0.0，目的地址为255.255.255.255。
2. DHCP服务器收到“DHCP发现”消息后，广播“**DHCP提供**”消息，其中包括提供给DHCP客户机的IP地址。源地址为DHCP服务器地址，目的地址为255.255.255.255。
3. DHCP客户机收到“DHCP提供”消息，如果接受该IP地址，那么就广播“**DHCP请求**”消息向DHCP服务器请求提供IP地址。源地址为0.0.0.0，目的地址为255.255.255.255。
4. DHCP服务器广播“**DHCP确认**”消息，将IP地址分配给DHCP客户机。源地址为DHCP服务器地址，目的地址为255.255.255.255。

*扩展：为什么需要广播交互*：DHCP的客户端和服务器端需要通过广播方式来进行交互，原因是在DHCP执行初期，客户端不知道服务器端的IP地址，而在执行中间，客户端并未被分配IP地址，从而导致两者之间的通信必须采用广播的方式。

*扩展：为什么使用UDP而不是TCP*：采用UDP而不采用TCP的原因也很明显：TCP需要建立连接，如果连对方的IP地址都不知道，那么更不可能通过双方的套接字建立连接。

> PPP 协议？

**点对点协议**(Point-to-PointProtocol，PPP)用来通过拨号或专线方式建立点对点连接发送数据，使其成为各种主机、网桥和路由器之间简单连接的一种共同的解决方案。

**PPP协议的特点**：
1. PPP提供差错检测但不提供纠错功能，只保证无差错接收（通过硬件进行CRC校验）。它是不可靠的传输协议，因此也不使用序号和确认机制。
2. 它仅支持点对点的链路通信，不支持多点线路。
3. PPP只支持全双工链路。
4. PPP的两端可以运行不同的网络层协议，但仍然可使用同一个PPP进行通信。
5. PPP是面向字节的，当信息字段出现和标志字段一致的比特组合时，PPP有两种不同的处理方法：若PPP用在异步线路（默认），则采用字符填充法；若PPP用在SONET/SDH等同步线路，则协议规定采用硬件来完成比特填充（和HDLC的做法一样）。

> BGP 协议？

**边界网关协议**（BorderGatewayProtocol，BGP）是不同自治系统的路由器之间交换路由信息的协议，是一种外部网关协议。边界网关协议常用于互联网的网关之间。BGP采用的是路径向量路由选择协议，BGP是应用层协议，它是基于TCP的。

**工作原理**：每个自治系统的管理员要选择至少一个路由器（可以有多个）作为该自治系统的“BGP发言人”。一个BGP发言人与其他自治系统中的BGP发言人要交换路由信息，就要先建立TCP连接，然后在此连接上交换BGP报文以建立BGP会话，再利用BGP会话交换路由信息。当所有BGP发言人都相互交换网络可达性的信息后，各BGP发言人就可找出到达各个自治系统的较好路由。

每个BGP发言人除必须运行BGP外，还必须运行该AS所用的内部网关协议，如OSPF或RIP。BGP所交换的网络可达性信息就是要到达某个网络（用网络前缀表示）所要经过的一系列AS。

**特点**：

1. BGP交换路由信息的结点数量级是自治系统的数量级，比这些自治系统中的网络数少很多。
2. 每个自治系统中BGP发言人（或边界路由器）的数目是很少的。这样就使得自治系统之间的路由选择不致过分复杂。
3. BGP支持CIDR，因此BGP的路由表也就应当包括目的网络前缀、下一跳路由器，以及到达该目的网络所要经过的各个自治系统序列。
4. BGP刚运行时，BGP的邻站交换整个BGP路由表，但以后只需在发生变化时更新有变化的部分。这样做对节省网络带宽和减少路由器的处理开销都有好处。

> ICMP 协议？

网际控制报文协议（Intermnet Control Message Protocol，ICMP）用来让主机或路由器报告差错和异常情况。ICMP报文作为IP层数据报的数据，加上数据报的首部，组成IP数据报发送出去。ICMP是网络层协议。

ICMP报文的种类有两种，即ICMP差错报告报文和ICMP询问报文。

**ICMP差错报告报文**用于目标主机或到目标主机路径上的路由器向源主机报告差错和异常情况。共有以下5种常用的类型：

1. **终点不可达**。当路由器或主机**不能交付数据报**时，就向源点发送终点不可达报文。
2. **源点抑制**。当路由器或主机**由于拥塞而丢弃数据报**时，就向源点发送源点抑制报文，使源点知道应当把数据报的发送速率放慢。
3. **时间超过**。当路由器收到**生存时间为零的数据报**时，除丢弃该数据报外，还要向源点发送时间超过报文。当终点在预先规定的时间内不能收到一个数据报的全部数据报片时，就把已收到的数据报片都丢弃，并向源点发送时间超过报文。
4. **参数问题**。当路由器或目的主机收到的数据报的**首部中有的字段的值不正确**时，就丢弃该数据报，并向源点发送参数问题报文。
5. **改变路由**（重定向）。路由器把改变路由报文发送给主机，让主机知道下次应将数据报发送给另外的路由器（可通过更好的路由）。

不应发送ICMP差错报告报文的几种情况如下：
1. 对ICMP差错报告报文不再发送ICMP差错报告报文。
2. 对第一个分片的数据报片的所有后续数据报片都不发送ICMP差错报告报文。
3. 对具有组播地址的数据报都不发送ICMP差错报告报文。
4. 对具有特殊地址（如127.0.0.0或0.0.0.0）的数据报不发送ICMP差错报告报文。

**ICMP询问报文**有4种类型：回送请求和回答报文、时间戳请求和回答报文、地址掩码请求和回答报文、路由器询问和通告报文，最常用的是前两类。

ICMP的两个常见应用是分组网间探测PING（用来测试两台主机之间的连通性）和Traceroute（UNTX中的名字，在Windows中是Tracert，可以用来跟踪分组经过的路由）。其中PING使用了ICMP回送请求和回答报文，Traceroute（Tracert）使用了ICMP时间超过报文。

注意：PING工作在应用层，它直接使用网络层的ICMP，而未使用传输层的TCP或UDP。Traceroute/Tracert工作在网络层。

> HTTP 协议？

**是什么**：HTTP定义了浏览器怎样向服务器请求文档，以及服务器怎样把文档传送给浏览器。从层次的角度看，HTTP是面向事务的（Transaction-oriented）应用层协议，它规定了在浏览器和服务器之间的请求和响应的格式与规则，是万维网上能够可靠地交换文件（包括文本、声音、图像等各种多媒体文件）的重要基础。

**HTTP的操作过程**：从协议执行过程来说，浏览器要访问服务器时，首先要完成域名解析。一旦获得了服务器的IP地址，浏览器就通过TCP向服务器发送连接建立请求。每个万维网站点都有一个服务器进程，它不断地监听TCP的端口80（默认），当监听到连接请求后便与浏览器建立TCP连接。然后，浏览器就向服务器发送请求获取某个Web页面的HTTP请求。服务器收到请求后，将构建所请求Web页的必需信息，并通过HTTP响应返回给浏览器。浏览器再将信息进行解释，然后将Web页显示给用户。最后，TCP连接释放。

**HTTP的特点**：HTTP使用TCP作为传输层协议，保证了数据的可靠传输。HTTP不必考虑数据在传输过程中被丢弃后又怎样被重传。但是，HTTP本身是无连接的（务必注意）。也就是说，虽然HTTP使用了TCP连接，但通信的双方在交换HTTP报文之前不需要先建立HTTP连接。HTTP是无状态的。也就是说，同一个客户第二次访问同一个服务器上的页面时，服务器的响应与第一次被访问时的相同。因为服务器并不记得曾经访问过的这个客户，也不记得为该客户曾经服务过多少次。

HTTP既可以使用非持久连接，也可以使用持久连接。

> TFTP 协议？

TFTP（Trivial File Transfer Protocol，小型文件传输协议）是一种简单、轻量级的文件传输协议，相对于FTP（File Transfer Protocol）而言，它的功能更为简单，但也更加高效。基于UDP协议，UDP的优势在于简单、轻量，并且无需进行连接建立和断开。它设计简单，易于实现和部署，但安全性较低，通常用于局域网或受信任的网络环境中。TFTP支持从服务器下载文件到客户端和将文件从客户端上传到服务器两种操作模式。

> DNS 含义、谈谈对其的理解？

**定义**：域名系统（Domain Name System，DNS）是一种命名系统，用来把具有特定含义的主机名转换为便于机器处理的IP地址。DNS系统采用客户/服务器模型，其协议运行在UDP之上。

我将从3个方面聊一下DNS：层次域名空间、域名服务器和域名解析。

**层次域名空间**：DNS使用域名层次结构来组织和管理域名。域名由多个部分组成，每个部分之间用点号（.）分隔，例如www.example.com。域名层次结构从右向左逐级划分为顶级域（TLD）、二级域、三级域，以此类推，形成一个树状结构。

**域名服务器**：DNS服务器根据功能和位置的不同，可以分为多个类型，包括根DNS服务器、顶级域DNS服务器、权威DNS服务器和递归DNS服务器等。它们各自承担着不同的责任和角色，共同构建了完整的DNS系统。

**域名解析**：DNS的主要功能是将域名解析为相应的IP地址。当用户在浏览器中输入一个域名时，操作系统会向本地DNS服务器发送查询请求，以获取该域名对应的IP地址。

域名解析有两种方法：递归查询和递归与迭代相结合的查询。

1. <u>递归查询</u>：一般不使用。对根域名服务器造成负载过大。本机 - 本地域名服务器 - 根域名服务器 - 顶级域名服务器 - 权限域名服务器。
2. <u>递归和迭代相结合的查询</u>：
	1. 客户机向其本地域名服务器发出DNS请求报文（递归查询）。
	2. 本地域名服务器收到请求后，查询本地缓存，若没有该记录，则以DNS客户的身份向根域名服务器发出解析请求报文（迭代查询）。
	3. 根域名服务器收到请求后，判断该域名属于.com域，将对应的顶级域名服务器dns.com的IP地址返回给本地域名服务器。
	4. 本地域名服务器向顶级域名服务器dns.com发出解析请求报文（选代查询）。
	5. 顶级域名服务器dns.com收到请求后，判断该域名属于abc.com域，因此将对应的授权域名服务器dns.abc.com的IP地址返回给本地域名服务器。
	6. 本地域名服务器向授权域名服务器dns.abc.com发起解析请求报文（选代查询）。
	7. 授权域名服务器dns.abc.com收到请求后，将查询结果返回给本地域名服务器。
	8. 本地域名服务器将查询结果保存到本地缓存，同时返回给客户机。

> SMTP 协议？

**是什么**：SMTP（Simple Mail Transfer Protocol）是一种用于电子邮件传输的协议。它是互联网上常用的电子邮件标准之一。是基于TCP协议的。

**作用**：用户代理向邮件服务器发送邮件或在邮件服务器之间发送邮件。用的是“推”（Push）的通信方式，即用户代理向邮件服务器发送邮件及在邮件服务器之间发送邮件时，SMTP客户将邮件“推”送到SMTP服务器。

*扩展：POP3协议*：邮件读取协议用于用户代理从邮件服务器读取邮件，如POP3。POP3用的是“拉”（PulI）的通信方式，即用户读取邮件时，用户代理向邮件服务器发出请求，“拉”取用户邮箱中的邮件。

*扩展：邮件收发流程*：

1. 发信人调用用户代理来撰写和编辑要发送的邮件。
2. 用户代理用SMTP把邮件传送给发送端邮件服务器。
3. 发送端邮件服务器将邮件放入邮件缓存队列中，等待发送。
4. 运行在发送端邮件服务器的SMTP客户进程，发现邮件缓存中有待发送的邮件，就向运行在接收端邮件服务器的SMTP服务器进程发起建立TCP连接。
5. TCP连接建立后，SMTP客户进程开始向远程SMTP服务器进程发送邮件。当所有待发送邮件发完后，SMTP就关闭所建立的TCP连接
6. 运行在接收端邮件服务器中的SMTP服务器进程收到邮件后，将邮件放入收信人的用户邮箱，等待收信人在方便时进行读取。
7. 收信人打算收信时，调用用户代理，使用POP3（或IMAP）协议将自己的邮件从接收端邮件服务器的用户邮箱中取回（如果邮箱中有来信的话）。

> SNMP协议

**是什么**：SNMP（Simple Network Management Protocol，简单网络管理协议）是一种用于管理和监控网络设备的标准协议。

**做什么**：它定义了一组网络管理消息，用于远程监控和控制网络设备，例如路由器、交换机、服务器等。SNMP允许网络管理员远程监视设备的状态、性能和配置，并且可以对这些设备进行管理操作，如配置变更、故障排除和性能优化。

<u>就知道这么多了。</u>

> Ipconfig 的作用是什么？

`ipconfig` 是一个命令行工具，通常用于在Windows操作系统上查看和管理网络配置信息。包括 IP 地址、子网掩码、默认网关、DNS 服务器等。
