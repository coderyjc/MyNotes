## 【23】OS

**OS 有哪些特征、基本特征是什么？**

计算机系统的异步性？
举例解释一下同步和互斥？
库函数和系统调用的区别和联系？

多道程序技术是什么？为什么引入多道程序技术？
解释一下管程是什么？
介绍一下作业与作业步？
OS 有那几种方式将程序装入内存？

什么是通道、通道的功能？
虚拟存储器是什么，有什么特征？
比较分时系统和实时系统的区别？
分页与分段的区别与联系？
分页的硬件支持？
**什么是死锁？**
**怎样预防死锁？**
**如何避免死锁？**
介绍银行家算法及其思想？
计算机是如何启动的？
程序是如何跑起来的？



> 分时系统和实时系统的区别？

【目标、调度方式、应用领域】

- **目标**：实时操作系统的主要目标是满足对任务响应时间有严格要求的实时性应用，而分时操作系统的主要目标是允许多用户共享计算机资源，提高资源利用率。
- **调度方式**：实时操作系统采用严格的任务调度策略，保证任务在规定的时间内完成；而分时操作系统采用分时调度的方式，让多个用户的任务轮流执行。
- **应用领域**：实时操作系统主要应用于对任务响应时间有严格要求的领域，如航空航天、汽车电子、工业控制等；而分时操作系统主要应用于多用户共享计算机资源的环境，如个人电脑、服务器等。

> 什么是管态？什么是目态？它们与进程运行状态的关系是什么？

**定义**：目态是用户态，管态是核心态。操作系统内核工作在核心态，而用户程序工作在用户态。

**关系**：系统不允许用户程序实现核心态的功能，但是用户程序必须使用这些功能，当用户程序需要使用核心态的功能的时候，就会主动执行trap指令发起系统调用，请求系统提供服务。系统通过硬件中断机制进入核心态，运行*管理程序*。还有一种情况就是程序运行出现异常情况，被动地需要管理程序的服务，这时就通过异常处理来进入核心态。

*扩展：列举相关的管理程序？*
1. 设备管理。完成设备的启动，请求或释放；
2. 文件管理。完成文件的读、写、创建及删除等功能。
3. 进程控制。完成进程的创建、撤销、阻塞及唤醒等功能。
4. 进程通信。完成进程之间的消息传递或信号传递等功能。
5. 内存管理。完成内存的分配、回收等功能。

> 程序和进程的关系？

1. **【动静】** 而程序是一组有序的指令集合，是一种静态的概念。进程是程序及其数据在计算机上的一次运行活动，是一个动态的概念。
2. **【存在】** 进程是程序的一次执行过程，它是动态地创建和消亡的，具有一定的生命周期，是暂时存在的；而程序则是一组代码的集合，是永久存在的，可长期保存。
3. **【包含】** 一个进程可以执行一个或几个程序，一个程序也可构成多个进程。进程可创建进程，而程序不可能形成新的程序。
4. **【组成】** 进程与程序的组成不同。进程的组成包括数据和PCB，而程序是由一系列的指令和数据组成的。

> **谈谈什么是PCB**

**是什么**：进程控制块（Process Control Block，PCB）是进程实体的一部分，是进程存在的唯一标志。系统利用PCB来描述进程的基本情况和运行状态，进而控制和管理进程。比如创建进程，实质上是创建进程实体中的PCB；而撤销进程，实质上是撤销进程的PCB。

可以将PCB看成一种数据结构，他包含了这个进程拥有的一些信息：

1. 进程描述信息。进程标识符：标志各个进程，每个进程都有一个唯一的标识号。用户标识符：进程归属的用户，用户标识符主要为共享和保护服务。
2. 进程控制和管理信息。进程当前状态：描述进程的状态信息，作为处理机分配调度的依据。进程优先级：描述进程抢占处理机的优先级，优先级高的进程可优先获得处理机。
3. 资源分配清单，用于说明有关内存地址空间或虚拟地址空间的状况，所打开文件的列表和所使用的输入/输出设备信息。
4. 处理机相关信息，也称处理机的上下文，主要指处理机中各寄存器的值。当进程被切换时，处理机状态信息都必须保存在相应的PCB中，以便在该进程重新执行时，能从断点继续执行。

> 为了实现重定位需要哪些硬件？

基址寄存器（Base Register）和限长寄存器（Limit Register）

- 基址寄存器存储了程序或数据在内存中的**最小物理地址**，而限长寄存器则存储了程序或数据**所占用的内存空间的长度**。
- 当程序或数据需要被加载到内存时，基址寄存器和限长寄存器能够指定加载到内存的具体位置和长度，从而实现重定位。

进一步：*基址寄存器和限长寄存器如何实现内存保护？*

1. **访存操作**：
    - 当程序或数据需要访问内存时，CPU会将要访问的地址（逻辑地址）与基址寄存器中存储的基址相加，得到物理地址。
    - 同时，CPU会检查物理地址是否小于限长寄存器中存储的限长值，以确保访问的地址在指定的内存范围内。
2. **内存访问权限**：
    - 如果访问的地址在指定的内存范围内（即物理地址小于基址加上限长），则访问被允许，CPU会执行相应的读取或写入操作。
    - 如果访问的地址超出了指定的内存范围，CPU会产生一个异常（例如内存访问越界异常），操作系统会相应地处理这个异常，通常会终止相关进程或线程，以防止非法的内存访问。


