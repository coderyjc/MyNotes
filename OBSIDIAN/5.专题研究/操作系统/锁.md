第28章 锁
第29章 基于锁的并发数据结构

Peterson 算法：

看到过一个比较通俗的解释：把两个线程当成两个人，临界区比作一个厕所坑位。

当一个人想上厕所的时候（flag[self] = 1），会比较谦让，先让对方去（turn = 1 - self），这时候如果对方想去（flag[1 - self] == 1），自己就会等待。

如果对方不想去（flag[1 - self] != 1），或者对方也想上厕所，但对方抢先谦让，让自己先去（turn == self）的时候，自己才会去。

