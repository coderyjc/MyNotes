## 列表渲染

### 基本使用

v-for的基本格式是 "item in 数组"：
1. 数组通常是来自data或者prop，也可以是其他方式；
2. item是我们给每项元素起的一个别名，这个别名可以自定来定义；

电影列表的渲染

```html
<ul>
<li v-for="movie in movies">{{ movie }}</li>
</ul>
```

我们知道，在遍历一个数组的时候会经常需要拿到数组的索引：
1. 如果我们需要索引，可以使用格式： "(item, index) in 数组"；
2. 注意上面的顺序：数组元素项item是在前面的，索引项index是在后面的；

带有索引的渲染

```html
<ul>
  <li v-for="(movie, index) in movies">{{index + 1}} - {{ movie }}</li>
</ul>

```


 v-for也支持遍历对象，并且支持有一二三个参数：
- 一个参数： "value in object";
- 二个参数： "(value, key) in object";
- 三个参数： "(value, key, index) in object";

v-for同时也支持数字的遍历：每一个item都是一个数字；

v-for也可以遍历其他可迭代对象(Iterable)

```html
    <!-- 2.遍历对象 -->
    <ul>
      <li v-for="(value, key, index) in info">{{value}}-{{key}}-{{index}}</li>
    </ul>

    <!-- 3.遍历字符串(iterable) -->
    <ul>
      <li v-for="item in message">{{item}}</li>
    </ul>

    <!-- 4.遍历数字 -->
    <ul>
      <li v-for="item in 100">{{item}}</li>
    </ul>
```

列表渲染中的key有什么用？
官方解释：

- key属性主要用在Vue的虚拟DOM算法，在新旧nodes对比时辨识VNodes；
- 如果不使用key，Vue会使用一种最大限度减少动态元素并且尽可能的尝试就地修改/复用相同类型元素的算法；
- 而使用key时，它会基于key的变化重新排列元素顺序，并且会移除/销毁key不存在的元素

```ad-tip
title:什么是VNode？
关于这个问题和虚拟DOM相关的算法，可以接着看视频：
第/974/975/集，有相关的解释
```

### 使用template

类似于v-if，你可以使用 template 元素来循环渲染一段包含多个元素的内容 -- 我们使用template来对多个元素进行包裹，而不是使用div来完成；

这样使用的前提是div是没有意义的。

```html
    <template v-for="(value, key, index) in infos">
      <span>{{value}}</span>
      <strong>{{key}}</strong>
      <i>{{index}}</i>
    </template>
```

### 数组更新检测

Vue 将被侦听的数组的变更方法进行了包裹，所以它们也将会触发视图更新

这些被包裹过的方法包括：
- push()
- pop()
- shift()
- unshift()
- splice()
- sort()
- reverse()

也即是说，通过这些方法修改了原来的数组的时候，对应的视图也会随之更新。

但是，不修改原数组的方法不会引起视图的更新：

```js
const newNames = this.names.map(item => item + "why")

// 赋值给原来的数组才能修改视图
this.names = newNames
```