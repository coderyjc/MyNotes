> 声明：由于官方文档是英文的，并且内容比较多，因此我简要地翻译了这个中文版的，【并不是完全翻译，而是用我自己的话介绍了一遍】
> 
> 涉及JavaScript的相关知识都没写，默认大家都会JavaScript的基础知识
> 
> 所有内容来自官方文档
> 
> 如有不同之处，请以官方文档为主。


Contents

- [[#命令类型|命令类型]]
- [[#动态命令|动态命令]]
- [[#执行js命令|执行js命令]]
- [[#异步函数|异步函数]]
- [[#如何输出|如何输出]]
- [[#空白控制|空白控制]]


## 命令类型

一共有三种

**开始**符号：
-   `<%`: 只显示里面命令的表达式输出
-   `<%~`: 插值，添加了一些字符转义
-   `<%*`: 执行里面的js代码，默认不输出内容

**结束**符号：都是`%>`

命令工具

除了以上三种，还有一些工具， 在命令的开始标记中声明。

包括空白控制和动态命令

## 动态命令

命令将在进入预览模式时被解析。

声明方式：把开标签换成 `<%+`

比如查看上次修改日期 `<%+ tp.file.last_modified_date() %>` 

刷新问题：是放缓存中，每次预览刷一次，不会改变

## 执行js命令

可以通过tp访问对象和所有内部变量和函数

js执行时也可以访问app和moment等

## 异步函数

不要忘了使用 `await` 异步关键字

## 如何输出

最好使用原始的插值命令

非要想输出的话，就将要输出的值append到tR的后面  `<%* tR += "test" %>` 

一些例子

```js
<%* if (tp.file.title.startsWith("Hello")) { %>
This is a hello file !
<%* } else { %>
This is a normal file !
<%* } %>
    
<%* if (tp.frontmatter.type === "seedling") { %>
This is a seedling file !
<%* } else { %>
This is a normal file !
<%* } %>
    
<%* if (tp.file.tags.contains("#todo")) { %>
This is a todo file !
<%* } else { %>
This is a finished file !
<%* } %>

<%*
function log(msg) {
    console.log(msg);
}
%>
<%* log("Title: " + tp.file.title) %>
    
<%* tR += tp.file.content.replace(/stuff/, "things"); %>
```

## 空白控制

Templater不会删除任何换行符，比如

```js
<%* if (tp.file.title == "MyFile" ) { %>
This is my file!
<%* } else { %>
This isn't my file!
<%* } %>
Some content ...

```

会变成下面这样

```js
\\换行
This isn't my file!
\\换行
Some content ...
```

命令执行完后的空行可以删除。如下。


-   开头符号 `<%_` 会删除命令前的所有空格
-   结尾符号`_%>`)  删除之后的
-   开头符号`<%-`) 会删除命令前的1个空格
-   结尾符号`-%>` 会删除后面的1个

如下
```js
<%* if (tp.file.title == "MyFile" ) { -%>
This is my file!
<%* } else { -%>
This isn't my file!
<%* } -%>
Some content ...
```

输出为：

```js
This isn't my file!
Some content ...
```