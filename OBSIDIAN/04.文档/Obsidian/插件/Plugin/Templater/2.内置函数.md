---
plugin-platform: obsidian
name: templater
chapter: 2.内置函数
create_date: 2022-02-25
---


> 声明：由于官方文档是英文的，并且内容比较多，因此我简要地翻译了这个中文版的，【并不是完全翻译，而是用我自己的话介绍了一遍】
> 
> 涉及JavaScript的相关知识都没写，默认大家都会JavaScript的基础知识
> 
> 所有内容来自官方文档
> 
> 如有不同之处，请以官方文档为主。


Contents

- [[#tp.date|tp.date]]
	- [[#举例|举例]]
- [[#tp.file|tp.file]]
- [[#tp.frontmatter|tp.frontmatter]]
- [[#tp.obsidian|tp.obsidian]]
- [[#tp.system|tp.system]]
- [[#tp.web|tp.web]]
- [[#Contributing|Contributing]]


# 内置函数

调用方式 `<% tp.<module_name>.<internal_function_name> %>`

接下来介绍各种模块以及函数的用法。

##  tp.date

本模板让我们可以直接使用moment.js 的moment对象，以及其所有的函数，

官方文档 [https://momentjs.com/docs/#/displaying/](https://momentjs.com/docs/#/displaying/)

当前日期 tp.date.now
`tp.date.now(format: string = "YYYY-MM-DD", offset?: number⎮string, reference?: string, reference_format?: string)`

下一天的日期 tp.date.tomorow
`tp.date.tomorrow(format: string = "YYYY-MM-DD")`

带有周几标记的 
`tp.date.weekday(format: string = "YYYY-MM-DD", weekday: number, reference?: string, reference_format?: string)`

上一天的时间 tp.date.yesterday
`tp.date.yesterday(format: string = "YYYY-MM-DD")`

- `format`: 日期的格式，参考这里  [format reference](https://momentjs.com/docs/#/displaying/format/)
-  `offset`: 日期的偏移，-7代表上周    
- `reference`: 日期引用, 比如把本文件的标题设置为本函数的返回值
- `reference_format`: 日期引用的格式

### 举例

这里调用file的title接口有报错了，先跳过。没有列举在下面

```js
Date now: <% tp.date.now() %>
Date now with format: <% tp.date.now("Do MMMM YYYY") %>

Last week: <% tp.date.now("dddd Do MMMM YYYY", -7) %>
Today: <% tp.date.now("dddd Do MMMM YYYY, ddd") %>
Next week: <% tp.date.now("dddd Do MMMM YYYY", 7) %>

Last month: <% tp.date.now("YYYY-MM-DD", "P-1M") %>
Next year: <% tp.date.now("YYYY-MM-DD", "P1Y") %>

Date tomorrow with format: <% tp.date.tomorrow("Do MMMM YYYY") %>    

This week's monday: <% tp.date.weekday("YYYY-MM-DD", 0) %>
Next monday: <% tp.date.weekday("YYYY-MM-DD", 7) %>

Date yesterday with format: <% tp.date.yesterday("Do MMMM YYYY") %>
```

生成之后是这样：

```
Date now: 2022-01-25
Date now with format: 25日 一月 2022

Last week: 星期二 18日 一月 2022
Today: 星期二 25日 一月 2022, 周二
Next week: 星期二 1日 二月 2022

Last month: 2021-12-25
Next year: 2023-01-25

Date tomorrow with format: 26日 一月 2022    

This week's monday: 2022-01-24
Next monday: 2022-01-31

Date yesterday with format: 24日 一月 2022
```

##  tp.file

`tp.file.content`  文件的内容

`tp.file.create_new(template: TFile | string, filename?: string, open_new: boolean = false, folder?: TFolder)` 用特定的模板和特定的内容创建新文件

-   `filename`: 新文件的文件名, 默认是 "Untitled".
-   `folder`: 放置新文件的路径，默认是obsidian的默认路径
-   `open_new`: 是不是打开新文件。如果是，以后所有命令都会执行在新文件中
-   `template`: 新文件模板

`tp.file.creation_date(format: string = "YYYY-MM-DD HH:mm")` 返回文件创建日期

cursur 相关的没有写，以后可以补充

`tp.file.exists(filename: string)` 文件是否存在

`tp.file.folder(relative: boolean = false)` 文件所在的文件夹的名称

-   `relative`: 是否是相对路径

`tp.file.include(include_link: string | TFile)`  包括文件的链接内容。将解析包含内容中的模板。

-   `include_link`: 要解析的链接，e.g.  MyFile , 或者 TFile 对象.也支持文档块 e.g. MyFile#Section1

`tp.file.last_modified_date(format: string = "YYYY-MM-DD HH:mm")` 文件最后一次修改时间

`tp.file.move(new_path: string)` 移动文件。能有目录名和文件名不能有后缀。

`tp.file.path(relative: boolean = false)` 返回文件路径

`tp.file.rename(new_title: string)` 重命名，只写文件不用写后缀

`tp.file.selection()`  查找选择的文本

`tp.file.tags` 文件中的标签，返回字符串列表

`tp.file.title`  标题

### 例子

```js
File content: <% tp.file.content %>

File creation date: <% tp.file.creation_date() %>
File creation date with format: <% tp.file.creation_date("dddd Do MMMM YYYY HH:mm") %>

File creation: [[<% (await tp.file.create_new("MyFileContent", "MyFilename")).basename %>]]

File cursor: <% tp.file.cursor(1) %>

File cursor append: <% tp.file.cursor_append("Some text") %>
    
File existence: <% tp.file.exists("MyFile") %>

File find TFile: <% tp.file.find_tfile("MyFile").basename %>
    
File Folder: <% tp.file.folder() %>
File Folder with relative path: <% tp.file.folder(true) %>

File Include: <% tp.file.include("[[Template1]]") %>

File Last Modif Date: <% tp.file.last_modified_date() %>
File Last Modif Date with format: <% tp.file.last_modified_date("dddd Do MMMM YYYY HH:mm") %>

File Move: <% await tp.file.move("/A/B/" + tp.file.title) %>
File Move + Rename: <% await tp.file.move("/A/B/NewTitle") %>

File Path: <% tp.file.path() %>
File Path with relative path: <% tp.file.path(true) %>

File Rename: <% await tp.file.rename("MyNewName") %>
Append a "2": <% await tp.file.rename(tp.file.title + "2") %>

File Selection: <% tp.file.selection() %>

File tags: <% tp.file.tags %>

File title: <% tp.file.title %>
Strip the Zettelkasten ID of title (if space separated): <% tp.file.title.split(" ")[1] %>
```

例子报错了，以后再看吧，还是path的问题。

##  tp.frontmatter

元数据信息

不重要

User Guide
[https://silentvoid13.github.io/Templater/internal-functions/internal-modules/frontmatter-module.html](https://silentvoid13.github.io/Templater/internal-functions/internal-modules/frontmatter-module.html)

##  tp.obsidian

一般用不到

User Guide
[https://silentvoid13.github.io/Templater/internal-functions/internal-modules/obsidian-module.html](https://silentvoid13.github.io/Templater/internal-functions/internal-modules/obsidian-module.html)


##  tp.system

`tp.system.clipboard()` 返回用户剪贴板的内容

其他的应该用不到了

User Guide
[https://silentvoid13.github.io/Templater/internal-functions/internal-modules/system-module.html](https://silentvoid13.github.io/Templater/internal-functions/internal-modules/system-module.html)

##  tp.web

一般用不到

User Guide
[https://silentvoid13.github.io/Templater/internal-functions/internal-modules/web-module.html](https://silentvoid13.github.io/Templater/internal-functions/internal-modules/web-module.html)

## Contributing

用于自主DIY这个软件

User Guide
[https://silentvoid13.github.io/Templater/internal-functions/contribute.html](https://silentvoid13.github.io/Templater/internal-functions/contribute.html)