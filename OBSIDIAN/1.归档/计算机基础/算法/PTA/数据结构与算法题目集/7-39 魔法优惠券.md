按照正负值分别排序即可

```c
#include<bits/stdc++.h>  
  
using namespace std;  
  
int main(){  
  
    // 输入  
    int n, m;  
    cin >> n;  
    int temp;  
    vector<int> n_positive, n_negative;  
    for (int i = 0; i < n; ++i){  
        cin >> temp;  
        if(temp > 0) n_positive.push_back(temp);  
        else n_negative.push_back(temp);  
    }  
    cin >> m;  
    vector<int> m_positive, m_negative;  
    for (int i = 0; i < m; ++i){  
        cin >> temp;  
        if(temp > 0) m_positive.push_back(temp);  
        else m_negative.push_back(temp);  
    }  
  
    // 处理  
    long sum = 0;  
    sort(n_negative.begin(), n_negative.end());  
    sort(m_negative.begin(), m_negative.end());  
    sort(n_positive.begin(), n_positive.end(), [](const int &a, const int &b){  
       return a > b;  
    });  
    sort(m_positive.begin(), m_positive.end(), [](const int &a, const int &b){  
       return a > b;  
    });  
  
    int min = n_negative.size() < m_negative.size() ? n_negative.size() : m_negative.size();  
    for (int i = 0; i < min; ++i) sum += n_negative[i] * m_negative[i];  
    min = n_positive.size() < m_positive.size() ? n_positive.size() : m_positive.size();  
    for (int i = 0; i < min; ++i) sum += n_positive[i] * m_positive[i];  
  
    cout << sum;  
    return 0;  
}
```